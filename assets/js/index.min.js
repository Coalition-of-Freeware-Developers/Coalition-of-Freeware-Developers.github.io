import{preloadImages}from"./utils.js";let lenis;const initSmoothScrolling=()=>{lenis=new Lenis({lerp:.1,smoothWheel:!0}),lenis.on("scroll",(()=>ScrollTrigger.update()));const e=l=>{lenis.raf(l),requestAnimationFrame(e)};requestAnimationFrame(e)},triggerFlipOnScroll=(e,l)=>{let r={flip:{absoluteOnLeave:!1,absolute:!1,scale:!0,simple:!0},scrollTrigger:{start:"center center",end:"+=300%"},stagger:0};r=Object.assign({},r,l);const t=e.querySelector(".caption"),i=e.querySelectorAll(".gallery__item"),s=[...i].map((e=>e.children.length>0?[...e.children]:[])).flat();e.classList.add("gallery--switch");const a=Flip.getState([i,t],{props:"filter, opacity"});e.classList.remove("gallery--switch");const o=Flip.to(a,{ease:"none",absoluteOnLeave:r.flip.absoluteOnLeave,absolute:r.flip.absolute,scale:r.flip.scale,simple:r.flip.simple,scrollTrigger:{trigger:e,start:r.scrollTrigger.start,end:r.scrollTrigger.end,pin:e.parentNode,scrub:!0},stagger:r.stagger});s.length&&o.fromTo(s,{scale:2},{scale:1,scrollTrigger:{trigger:e,start:r.scrollTrigger.start,end:r.scrollTrigger.end,scrub:!0}},0)},scroll=()=>{[{id:"#gallery-1",options:{flip:{absoluteOnLeave:!0,scale:!1}}},{id:"#gallery-2"},{id:"#gallery-3",options:{flip:{absolute:!0,scale:!1},scrollTrigger:{start:"center center",end:"+=900%"},stagger:.05}},{id:"#gallery-4"},{id:"#gallery-5"},{id:"#gallery-6"},{id:"#gallery-7"},{id:"#gallery-8",options:{flip:{scale:!1}}},{id:"#gallery-9"}].forEach((e=>{const l=document.querySelector(e.id);triggerFlipOnScroll(l,e.options)}))};preloadImages(".gallery__item").then((()=>{initSmoothScrolling(),[{id:"#gallery-1",options:{flip:{absoluteOnLeave:!0,scale:!1}}},{id:"#gallery-2"},{id:"#gallery-3",options:{flip:{absolute:!0,scale:!1},scrollTrigger:{start:"center center",end:"+=900%"},stagger:.05}},{id:"#gallery-4"},{id:"#gallery-5"},{id:"#gallery-6"},{id:"#gallery-7"},{id:"#gallery-8",options:{flip:{scale:!1}}},{id:"#gallery-9"}].forEach((e=>{const l=document.querySelector(e.id);triggerFlipOnScroll(l,e.options)})),document.body.classList.remove("loading")}));